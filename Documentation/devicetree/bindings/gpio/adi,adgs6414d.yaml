# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/gpio/adi,adgs6414d.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: ADI ADGS6414D Octal SPST Switch

maintainers:
  - Antoniu Miclaus <antoniu.miclaus@analog.com>

description: |
  The ADGS6414D is a high-density octal SPST (Single-Pole Single-Throw)
  switch with ultra-low on-resistance and SPI control interface.

  Key features:
  - 8 independent SPST switches
  - 0.56Ω typical on-resistance
  - SPI control interface with robust error detection
  - 4mm × 5mm, 30-terminal LGA package
  - CRC error detection and SCLK count error detection
  - Daisy-chain capability for multiple devices
  - Pin-for-pin replacement for ADGS1414D and ADGS2414D

  Switch Channels:
  - SW1-SW8: 8 independent switch channels (bits 0-7 in control byte)

allOf:
  - $ref: /schemas/spi/spi-peripheral-props.yaml#

properties:
  compatible:
    const: adi,adgs6414d

  reg:
    description: SPI chip select number
    maxItems: 1

  spi-max-frequency:
    description: Maximum SPI frequency
    maximum: 25000000

  gpio-controller: true

  "#gpio-cells":
    description: |
      Number of cells used to specify a GPIO. The meaning of the cells are:
        - First cell: GPIO number (0-7, corresponding to SW1-SW8)
        - Second cell: GPIO flags (GPIO_ACTIVE_HIGH/GPIO_ACTIVE_LOW)
    const: 2

  ngpios:
    description: Number of GPIOs available (8 switches)
    const: 8

  initial-state:
    description: |
      Initial state of the switches as an 8-bit bitmask.
      Bit 0 = SW1, Bit 1 = SW2, ..., Bit 7 = SW8.
      1 = switch closed, 0 = switch open.
    $ref: /schemas/types.yaml#/definitions/uint8
    default: 0

required:
  - compatible
  - reg
  - gpio-controller
  - "#gpio-cells"
  - ngpios

additionalProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>

    spi {
        #address-cells = <1>;
        #size-cells = <0>;

        switch@0 {
            compatible = "adi,adgs6414d";
            reg = <0>;
            spi-max-frequency = <25000000>;
            gpio-controller;
            #gpio-cells = <2>;
            ngpios = <8>;
            initial-state = /bits/ 8 <0x00>; // All switches open initially
        };
    };

  - |
    #include <dt-bindings/gpio/gpio.h>

    // Example with some switches initially closed
    spi {
        #address-cells = <1>;
        #size-cells = <0>;

        switch@1 {
            compatible = "adi,adgs6414d";
            reg = <1>;
            spi-max-frequency = <10000000>;
            gpio-controller;
            #gpio-cells = <2>;
            ngpios = <8>;
            initial-state = /bits/ 8 <0x05>; // SW1 and SW3 closed initially
        };
    };