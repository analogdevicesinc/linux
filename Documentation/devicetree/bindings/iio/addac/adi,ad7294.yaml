# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/iio/addac/adi,ad7294.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Analog Device AD7294/AD7294-2 device

maintainers:
  - Anshul Dalal <anshulusr@gmail.com>

description: |
  The AD7294/AD7294-2 is a monitor and control system with multichannel
  ADC, DAC, temperature and current sensor. The device features a 12-bit ADC
  and DAC with an i2c interface.

  Datasheet:
    AD7294: https://www.analog.com/media/en/technical-documentation/data-sheets/AD7294.pdf
    AD7294-2: https://www.analog.com/media/en/technical-documentation/data-sheets/AD7294-2.pdf

properties:
  compatible:
    enum:
      - adi,ad7294
      - adi,ad7294-2

  reg:
    maxItems: 1

  interrupts:
    maxItems: 1
    description: Alert interrupt

  adc-vref-supply:
    description: The regulator supply for ADC reference voltage (0.1V to 4.1V).

  dac-vref-supply:
    description: |
      The regulator supply for DAC reference voltage (0V to AVDD - 2V).

  avdd-supply:
    description: Fixed regulator supply for analog circuitry (4.5V to 5.5V).

  vdrive-supply:
    description: Logic power supply (2.7V to 5.5V).

  shunt-resistor-ohms:
    $ref: /schemas/types.yaml#/definitions/int32-array
    maxItems: 2
    description: Resistance for RS1 and RS2 in ohms

required:
  - compatible
  - reg
  - avdd-supply
  - vdrive-supply

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/irq.h>

    i2c {
      #address-cells = <1>;
      #size-cells = <0>;

      ad7294: addac@7b {
        compatible = "adi,ad7294";
        reg = <0x7b>;
        interrupt-parent = <&gpio>;
        interrupts = <26 IRQ_TYPE_LEVEL_LOW>;
        adc-vref-supply = <&adc_vref>;
        dac-vref-supply = <&dac_vref>;
        avdd-supply = <&avdd>;
        vdrive-supply = <&vdrive>;
        shunt-resistor-ohms = <1000 1000>;
      };
    };
