# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---
$id: http://devicetree.org/schemas/iio/frequency/adi,adl5960.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Analog Devices ADF5610 device driver

maintainers:
- Dragos Bogdan <dragos.bogdan@analog.com>

description: |
  The ADF5610 allows implementation of fractional-N or Integer N
  phase-locked loop (PLL) frequency synthesizers when used
  with an external loop filter and an external reference source.
  The wideband microwave voltage controlled oscillator (VCO)
  design permits frequency operation from 7300 MHz to
  14600 MHz at a single radio frequency (RF) output. A series of
  frequency dividers with a differential frequency output allows
  operation from 57 MHz to 14600 MHz.

properties:
  compatible:
    enum:
      - adi,adf5610

  reg:
    maxItems: 1

  spi-cs-high:
    description:
      In Legacy Mode, ADF5610 requires the chip select active high.

  spi-max-frequency:
    maximum: 50000000

  clocks:
    description:
      Definition of the external reference clock (see
      clock/clock-bindings.txt)
    minItems: 1

  clock-names:
    description:
      Must be "xref"
    maxItems: 1

  clock-scales:
    description:
      The Common Clock Framework max rate is limited by MAX
      of unsigned long. For ADF5610, this is a deficiency.
      If specified, this property allows arbitrary scales.
      The first element in the array should be the multiplier
      and the second element should be the divider.
    allOf:
      $ref: /schemas/types.yaml#/definitions/uint32-array
      minimum: 1

  adi,legacy-serial-port-mode:
    description:
      Enables Legacy Mode instead of Open Mode.

  adi,power-up-div-out-frequency-hz:
    description:
      Specifies the power-up DIV_OUT (PDIV_OUT, NDIV_OUT)
      frequency.

  adi,charge-pump-down-gain-ua:
    description:
      Charge pump down gain control. Affects fractional phase
      noise and lock detect settings.

  adi,charge-pump-up-gain-ua:
    description:
      Charge pump up gain control. Affects fractional phase
      noise and lock detect settings.

  adi,charge-pump-offset-ua:
    description:
      Charge pump offset control. Affects fractional phase
      noise and lock detect settings.

  adi,charge-pump-offset-down-enable:
    description:
      Charge pump up offset enable. Recommended setting
      in fractional mode using a passive loop equals 1
      decimal. Do not enable in integer mode.

  adi,charge-pump-offset-up-enable:
    description:
      Charge pump up offset enable. Recommended setting
      in fractional mode using a passive loop equals 0
      decimal. Do not enable in integer mode.

  adi,charge-pump-high-current-enable:
    description:
      High current charge pump enable. Low noise, narrow
      compliance range. Requires an op amp.

required:
  - compatible
  - reg
  - spi-max-frequency
  - clocks
  - clock-names
  - clock-scales

additionalProperties: false

examples:
  - |
    spi0 {
        #address-cells = <1>;
        #size-cells = <0>;
        frequency@0 {
                compatible = "adi,adf5610";
                reg = <0>;
                spi-cs-high;
                spi-max-frequency = <10000000>;

                clocks = <&adf5610_xref>;
                clock-names = "xref";
                clock-scales = <1 10>;

                adi,legacy-serial-port-mode;

                adi,power-up-div-out-frequency-hz = /bits/ 64 <10000600000>;

                adi,charge-pump-down-gain-ua =  /bits/ 16 <2540>;
                adi,charge-pump-up-gain-ua =  /bits/ 16 <2540>;
                adi,charge-pump-offset-ua =   /bits/ 16  <520>;
                adi,charge-pump-offset-down-enable;
       };
    };
...
