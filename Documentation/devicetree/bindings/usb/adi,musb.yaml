# SPDX-License-Identifier: (GPL-2.0-only)
%YAML 1.2
---
$id: http://devicetree.org/schemas/usb/adi,musb.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Inventra USB Glue Layer for Analog Devices SC5XX Processors

maintainers:
  - Analog Devices, Inc <adsp-linux@analog.com>

description: |
    For the Inventra-based USB IP on the ADI SC58X and SC57X processors
    (glues to musb_core.c)

properties:
  compatible:
    enum:
      - adi,musb

  reg:
    maxItems: 1

  reg-names:
    maxItems: 1

  interrupts:
    maxItems: 2

  interrupt-names:
    items:
      - const: mc
      - const: dma

  spu_securep_id:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: System Protection Unit peripheral ID

  mentor,multipoint:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: Indicate the musb controller supports multipoint with "1"

  mentor,num-eps:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: Number of endpoints supported including EP0

  mentor,ram-bits:
    description: Address size of the RAM in bits

  mentor,power:
    $ref: /schemas/types.yaml#/definitions/uint32
    description: Maximum power consumption in mA

  phys:
    maxItems: 1

required:
  - compatible
  - reg
  - reg-names
  - interrupts
  - interrupt-names
  - spu_securep_id
  - mentor,multipoint
  - mentor,num-eps
  - mentor,ram-bits
  - mentor,power
  - phys

additionalProperties: false

examples:
  - |
    #include <dt-bindings/interrupt-controller/arm-gic.h>
    #include <dt-bindings/interrupt-controller/irq.h>

    usb0: usb@310c1000 {
      compatible = "adi,musb";
      reg = <0x310c1000 0x390>;
      reg-names = "mc";
      interrupts = <GIC_SPI 132 IRQ_TYPE_LEVEL_HIGH>,
                   <GIC_SPI 133 IRQ_TYPE_LEVEL_HIGH>;
      interrupt-names = "mc", "dma";
      spu_securep_id = <153>;

      mentor,multipoint = <1>;
      mentor,num-eps = <16>;
      mentor,ram-bits = <12>;
      mentor,power = <500>;
      phys = <&usb0_phy>;
      status = "disabled";
    };
