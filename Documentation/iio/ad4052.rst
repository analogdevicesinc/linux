.. SPDX-License-Identifier: GPL-2.0-only

=============
AD4052 driver
=============

ADC driver for Analog Devices Inc. AD4052 and similar devices. The module name
is ``ad4052``.

Supported devices
=================

The following chips are supported by this driver:

* `AD4050 <https://www.analog.com/AD4050>`_
* `AD4052 <https://www.analog.com/AD4052>`_
* `AD4056 <https://www.analog.com/AD4056>`_
* `AD4058 <https://www.analog.com/AD4058>`_

Wiring modes
============

The ADC uses SPI 4-wire mode, and contain two programmable GPIOs and a CNV pin.

The CNV pin is exposed as the ``cnv-gpios`` and triggers an ADC conversion. GP1
is ADC conversion ready signal and GP0 Threshold event interrupt, both exposed
as interrupts.

Omit ``cnv-gpios`` and tie CNV and CS together to use the rising edge of the CS
as the CNV signal.

Device attributes
=================

The ADC contains only one channel with following attributes:

.. list-table:: Channel attributes
   :header-rows: 1

   * - Attribute
     - Description
   * - ``in_voltage_calibscale``
     - Scale factor to multiply the raw value.
   * - ``in_voltage_raw``
     - Raw ADC voltage value
   * - ``in_voltage_oversampling_ratio``
     - Enable the device's burst averaging mode to over sample using the
       internal sample rate.
   * - ``in_voltage_oversampling_ratio_available``
     - List of available oversampling values. Value 1 disable the burst
       averaging mode.

Also contain the following device attributes:

.. list-table:: Device attributes
   :header-rows: 1

   * - Attribute
     - Description
   * - ``oversamling_frequency``
     - Frequency used in the burst averaging mode, sets the device internal
       sample rate when the mode is activated.
   * - ``oversampling_frequency_available``
     - List of available sample rates.

Interrupts
==========

The interrupt named ``gp0`` is used as the data ready signal. If not set, the
driver will not wait for the data ready assertion, and will result in reading a
sample before it's ready, particularly in oversampling mode.

Low-power mode
==============

The device enters low-power mode on idle to save power.
