// SPDX-License-Identifier: GPL-2.0-or-later
// Copyright 2025 Anirudh Srinivasan

/dts-v1/;

#include "aspeed-g6.dtsi"
#include "aspeed-g6-pinctrl.dtsi"
#include <dt-bindings/gpio/aspeed-gpio.h>

/ {
	model = "Asus Kommando IPMI Expansion Card";
	compatible = "asus,ast2600-kommando-ipmi-card", "aspeed,ast2600";

	aliases {
		serial4 = &uart5;
	};

	chosen {
		stdout-path = "serial4:115200n8";
	};

	leds {
		compatible = "gpio-leds";

		led-fault {
			gpios = <&gpio1 ASPEED_GPIO(C, 5) GPIO_ACTIVE_HIGH>;
			label = "panic_amber";
			panic-indicator;
			default-state = "off";
		};

		led-heartbeat {
			gpios = <&gpio0 ASPEED_GPIO(A, 7) GPIO_ACTIVE_LOW>;
			label = "heartbeat_green";
			linux,default-trigger = "timer";
		};

	};

	memory@80000000 {
		device_type = "memory";
		reg = <0x80000000 0x40000000>;
	};

	reserved-memory {
		#address-cells = <1>;
		#size-cells = <1>;
		ranges;

		video_engine_memory: video {
			size = <0x04000000>;
			alignment = <0x01000000>;
			compatible = "shared-dma-pool";
			reusable;
		};
	};
};

&fmc {
	status = "okay";

	flash@0 {
		status = "okay";
		m25p,fast-read;
		label = "bmc";
		spi-max-frequency = <50000000>;
#include "openbmc-flash-layout-64.dtsi"
	};
};

&gpio0 {
	gpio-line-names =
	/*A0 0*/	"", "", "", "", "", "", "", "BMC_HBLED",
	/*B0 8*/	"", "", "", "", "", "", "", "",
	/*C0 16*/	"", "", "", "", "", "", "", "",
	/*D0 24*/	"", "", "", "", "", "", "", "",
	/*E0 32*/	"", "", "", "", "", "", "", "",
	/*F0 40*/	"", "", "", "", "", "", "", "",
	/*G0 48*/	"", "", "", "", "", "", "", "",
	/*H0 56*/	"", "", "", "", "", "", "", "",
	/*I0 64*/	"", "", "", "BMC_RSTBTN", "", "", "", "",
	/*J0 72*/	"", "", "", "", "", "", "", "",
	/*K0 80*/	"", "", "", "", "", "", "", "",
	/*L0 88*/	"", "", "", "", "", "", "", "",
	/*M0 96*/	"", "", "", "", "", "", "", "",
	/*N0 104*/	"", "", "", "", "", "", "", "",
	/*O0 112*/	"", "", "", "", "", "", "", "",
	/*P0 120*/	"", "", "", "", "", "", "", "",
	/*Q0 128*/	"", "", "", "", "", "", "", "",
	/*R0 136*/	"", "", "", "", "", "", "", "",
	/*S0 144*/	"", "", "", "", "", "", "", "",
	/*T0 152*/	"", "", "", "", "", "", "", "",
	/*U0 160*/	"", "", "", "", "", "", "", "",
	/*V0 168*/	"", "", "", "", "BMC_PWRBTN", "", "MB_S0_DETECT", "",
	/*W0 176*/	"", "", "", "", "", "", "", "",
	/*X0 184*/	"", "", "", "", "", "", "", "",
	/*Y0 192*/	"", "", "", "", "", "", "", "",
	/*Z0 200*/	"", "", "", "", "", "", "", "";
};

&gpio1 {
	gpio-line-names =
	/*18A0 0*/  "","","","","","","","",
	/*18B0 8*/  "","","","","","","","",
	/*18C0 16*/ "","","","","","BMC_MLED","","",
	/*18D0 24*/ "","","","","","","","",
	/*18E0 32*/ "","","","","","","","";
};

&vhub {
	status = "okay";
};

&video {
	status = "okay";
	memory-region = <&video_engine_memory>;
};
