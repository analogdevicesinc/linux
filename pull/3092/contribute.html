<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="This page serves the purpose of providing pointers and a brief introduction to contributing to the Linux Kernel, using the tools available as well as wrappers maintained by Analog Devices Inc." name="description" />

    <title>Contribution guidelines &#8212; Linux Drivers  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8e8a900e" />
    <link rel="stylesheet" type="text/css" href="_static/app.min.css?v=5d595293" />
    <script async="async" src="_static/app.umd.js?v=46a18818"></script>
    <link rel="icon" href="_static/icon.svg"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Continuous integration" href="ci.html" />
    <link rel="prev" title="AD9088 driver" href="iio/apollo.html" />
   
  
  
  <meta name="repository" content="linux">
  <meta name="version" content="">
  
    <meta name="page_source_suffix" content=".rst">
  
  
  


<style>
  body {
    
  }

  body.dark {
    
  }

  @media (prefers-color-scheme: dark) {
    body:not(.light) {
      
    }
  }
</style>
  </head>
  
    <body>
  
  <input type="checkbox" id="input-show-toc">
  <input type="checkbox" id="input-show-localtoc">
  <input type="checkbox" id="input-show-repotoc">

  
  <div class="search-area">
    <form action="" method="get">
      <input type="text" name="q" aria-labelledby="search-documentation" value="" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="search" placeholder="Search"/>
      <button class="icon"></button>
    </form>
  </div>
  

  <header>
    <div id="left">
      <label id="show-sidebar" class="icon" for="input-show-toc" title="Show/hide index"></label>
    </div>
    <div id="right">
      <span>
        <a id="logo-org" href="https://analog.com" aria-label="Analog Devices Inc. landing page"></a>
        <div class="vertical-divider"></div>
        
        <label id="show-repotoc" for="input-show-repotoc" title="Show/hide docs" tabindex="0">Docs</label>
        
        <a id="logo" href="index.html">
          <div>Linux</div>
        </a>
      </span>
      <span class="reverse">
        <label id="show-localtoc" class="icon" for="input-show-localtoc" title="Show/hide contents"></label>
      </span>
    </div>
  </header>


  <div class="repotoc-tree overlay">
    <root>
  <a href="./index.html" class="current">Linux</a>
</root>

  </div>
    <div class="localtoc">
      <div class="tocwrapper">
        <div class="header localtoc-header">
          <a id="scroll-up" href="#top-anchor" title="Back to top"></a>
        </div>
        <nav>
          <ul>
<li><a class="reference internal" href="#">Contribution guidelines</a><ul>
<li><a class="reference internal" href="#code-checkers">Code checkers</a><ul>
<li><a class="reference internal" href="#checkpatch">Checkpatch</a></li>
<li><a class="reference internal" href="#sparse-and-smatch">Sparse and smatch</a></li>
<li><a class="reference internal" href="#gcc-fanalyzer">GCC fanalyzer</a></li>
<li><a class="reference internal" href="#clang-static-analyzer">Clang static analyzer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#devicetree">Devicetree</a></li>
<li><a class="reference internal" href="#b4">B4</a></li>
<li><a class="reference internal" href="#subsytems">Subsytems</a><ul>
<li><a class="reference internal" href="#iio-subsytem">IIO Subsytem</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </nav>
      </div>
    </div>

  
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
    <a id="no-logo" href="index.html">
      Linux Drivers
    </a><input id="input-switch-toc" type="checkbox">
<label id="show-repotoc" for="input-switch-toc">
All content
</label>
<label id="show-toc" for="input-switch-toc">
Content on this topic
</label>
<div class="repotoc-tree">
  <root>
  <a href="./index.html" class="current">Linux</a>
</root>

</div>
<div class="toc-tree">
  <html>
  <body><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><input class="toctree-collapse" type="checkbox" name="toctree-collapse-1" id="toctree-collapse-1"/><div class="collapse"><a class="reference internal" href="iio/index.html">Industrial I/O</a><label for="toctree-collapse-1"><div class="icon"></div></label></div><ul>
<li class="toctree-l2"><a class="reference internal" href="iio/apollo.html">AD9088 driver</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contribution guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="ci.html">Continuous integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="mainline.html">ADI Linux version support</a></li>
</ul>
</body>
</html>

</div>
        </div>
      </div>

  <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper" id="top-anchor">
          <div class="body-header">
  <nav class="breadcrumb empty"><ol></ol></nav>
</div>
          <div class="body" role="main">
            
  <section id="contribution-guidelines">
<h1>Contribution guidelines<a class="headerlink" href="#contribution-guidelines" title="Link to this heading"></a></h1>
<p>This page serves the purpose of providing pointers and a brief introduction to
contributing to the Linux Kernel, using the tools available as well as wrappers
maintained by Analog Devices Inc.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When using <a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/" target="_blank">ADI Linux repository</a>, the <a class="reference internal" href="ci.html"><span class="doc">Continuous integration</span></a> system automates most checks inside
a container (<a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/ci/container" target="_blank">container</a>). See <a class="reference internal" href="ci.html#interactive-run"><span class="std std-ref">Interactive run</span></a> for
interactive usage.</p>
</div>
<section id="code-checkers">
<h2>Code checkers<a class="headerlink" href="#code-checkers" title="Link to this heading"></a></h2>
<p>There are many checkers to catch issues before submitting changes to the Kernel
mailing lists. <a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/ci/ci/build.sh" target="_blank">ci/build.sh</a> combines all of the checkers so that
they can be run with one command using a standard configuration. The checkers
supported by build.sh are as follows.</p>
<section id="checkpatch">
<h3>Checkpatch<a class="headerlink" href="#checkpatch" title="Link to this heading"></a></h3>
<p><a class="icon link reference external" href="https://docs.kernel.org/dev-tools/checkpatch.html" target="_blank" title="(in The Linux Kernel v6.19.0-rc7)"><span>Checkpatch</span></a>
(<a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/scripts/checkpatch.pl" target="_blank">scripts/checkpatch.pl</a>) is a perl script which checks for trivial
style violations in patches and optionally corrects them. Checkpatch can also
be run on file contexts and without the kernel tree.</p>
<p>It is the bare-minimum tool before submitting any patch series.</p>
<p>Usage:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./scripts/checkpatch.pl<span class="w"> </span><span class="o">[</span>OPTION<span class="o">]</span>...<span class="w"> </span><span class="o">[</span>FILE<span class="o">]</span>...
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You must always adjust the style to match the guidelines of the
<a class="reference internal" href="#subsystem"><span class="std std-ref">Subsytems</span></a> you are collaborating to.</p>
</div>
<p>To run it as a low-budget <a class="icon link reference external" href="https://en.wikipedia.org/wiki/Language_Server_Protocol" target="_blank">lsp server</a>, do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="w"> </span>true<span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>scripts/checkpatch.pl<span class="w"> </span>--color<span class="o">=</span>always<span class="w"> </span>drivers/power/supply/max77928_charger.c<span class="w">  </span><span class="se">\</span>
<span class="w">                        </span>--strict<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--ignore<span class="w"> </span>FILE_PATH_CHANGES<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--ignore<span class="w"> </span>LONG_LINE<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--ignore<span class="w"> </span>LONG_LINE_STRING<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--ignore<span class="w"> </span>LONG_LINE_COMMENT<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--ignore<span class="w"> </span>PARENTHESIS_ALIGNMENT<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--ignore<span class="w"> </span>CAMELCASE<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--ignore<span class="w"> </span>UNDOCUMENTED_DT_STRING<span class="w"> </span><span class="se">\</span>
<span class="w">                        </span>--strict<span class="w"> </span><span class="se">\ </span>&gt;<span class="w"> </span>/tmp/output<span class="w"> </span><span class="p">;</span><span class="w"> </span>clear<span class="w"> </span><span class="p">;</span><span class="w"> </span>cat<span class="w"> </span>/tmp/output<span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="se">\</span>
<span class="k">done</span>
</pre></div>
</div>
</section>
<section id="sparse-and-smatch">
<h3>Sparse and smatch<a class="headerlink" href="#sparse-and-smatch" title="Link to this heading"></a></h3>
<p><a class="icon link reference external" href="https://docs.kernel.org/dev-tools/sparse.html" target="_blank" title="(in The Linux Kernel v6.19.0-rc7)"><span>Sparse</span></a> is a semantic checker for C programs;
it can be used to find a number of potential problems with kernel code.
Usage:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~/linux$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">C</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>And <a class="icon link reference external" href="https://smatch.sourceforge.net/" target="_blank">Smatch</a> is a static analysis tool for
C mostly for the linux kernel.
Usage:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~/linux$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">C</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">CHECK</span><span class="o">=</span><span class="s2">&quot;smatch -p=kernel&quot;</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>Further reading: <a class="icon link reference external" href="https://lwn.net/Articles/1023646/" target="_blank">Finding locking bugs with Smatch</a></p>
</section>
<section id="gcc-fanalyzer">
<h3>GCC fanalyzer<a class="headerlink" href="#gcc-fanalyzer" title="Link to this heading"></a></h3>
<p>GCC’s
<a class="icon link reference external" href="https://gcc.gnu.org/onlinedocs/gcc/Static-Analyzer-Options.html#index-analyzer" target="_blank">-fanalyzer</a>
enables an static analysis of program flow which looks for “interesting”
interprocedural paths through the code, and issues warnings for problems found
on them.</p>
<p>Since it is a flag, it must be appended to the compile command, either to the
<cite>KCFLAGS</cite>:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~/linux$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">KCFLAGS</span><span class="o">=</span><span class="s2">&quot; -fanalyzer&quot;</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>To analyze a single file, generate compile commands with
<cite>./scripts/clang-tools/gen_compile_commands.py</cite>, extract the compile command
for the <code class="docutils literal notranslate"><span class="pre">.c</span></code> file and append <code class="docutils literal notranslate"><span class="pre">-fanalyzer</span></code>.</p>
</section>
<section id="clang-static-analyzer">
<h3>Clang static analyzer<a class="headerlink" href="#clang-static-analyzer" title="Link to this heading"></a></h3>
<p><a class="icon link reference external" href="https://clang-analyzer.llvm.org/" target="_blank">Clang static analyzer</a>  is a source code
analysis tool that finds bugs in C, C++, and Objective-C programs.</p>
<p>Since it is a flag, it must be appended to the compile command, either to the
<cite>KCFLAGS</cite>:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~/linux$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span><span class="nv">LLVM</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">KCFLAGS</span><span class="o">=</span><span class="s2">&quot; --analyze -Xanalyzer&quot;</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>To analyze a single file, generate compile commands with
<cite>./scripts/clang-tools/gen_compile_commands.py</cite>, extract the compile command
for the <code class="docutils literal notranslate"><span class="pre">.c</span></code> file and append <code class="docutils literal notranslate"><span class="pre">--analyze</span> <span class="pre">-Xanalyzer</span></code>.</p>
</section>
</section>
<section id="devicetree">
<h2>Devicetree<a class="headerlink" href="#devicetree" title="Link to this heading"></a></h2>
<p>The “Open Firmware Device Tree”, or simply
<a class="icon link reference external" href="https://docs.kernel.org/devicetree/usage-model.html" target="_blank" title="(in The Linux Kernel v6.19.0-rc7)"><span class="xref std std-doc">Devicetree</span></a> (DT), is a data
structure and language for describing hardware. More specifically, it is a
description of hardware that is readable by an operating system so that the
operating system doesn’t need to hard code details of the machine.</p>
<p>Even though some devicetrees are provided with the Linux Kernel, in general,
a custom devicetree will need to be written to describe a specific board or
device, using the protopytes provided by the
<a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/Documentation/devicetree/bindings" target="_blank">Documentation/devicetree/bindings/**/*.yaml</a> files.</p>
<p>When submitting dt-bindings, you must check:</p>
<div class="code-shell"><div><div class="no-select float-left highlight-default notranslate"><div class="highlight"><pre><span></span>~/linux$
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>dt_binding_check<span class="w"> </span><span class="nv">CONFIG_DTC</span><span class="o">=</span>y<span class="w"> </span><span class="nv">DT_CHECKER_FLAGS</span><span class="o">=</span>-m<span class="w">  </span><span class="nv">DT_SCHEMA_FILES</span><span class="o">=</span><span class="s2">&quot;./path/to/.yaml&quot;</span>
</pre></div>
</div>
<div class="clear-left"></div></div></div><p>For warnings and erros and resolve accordingly.</p>
</section>
<section id="b4">
<span id="id1"></span><h2>B4<a class="headerlink" href="#b4" title="Link to this heading"></a></h2>
<p><a class="icon link reference external" href="https://b4.docs.kernel.org/en/latest/index.html" target="_blank" title="(in B4 end-user docs)"><span class="xref std std-doc">B4</span></a> is a tool created to make it easier for project
developers and maintainers to use a distributed development workflow that
relies on patches and distribution lists for code contributions and review.</p>
<p>Take some time to try it out, and understand how it simplies many tasks.
B4 tools is not currently leveraged by continuous integration, and you
must run it locally.</p>
<p>The section that you will most interested in is the
<a class="icon link reference external" href="https://b4.docs.kernel.org/en/latest/contributor/overview.html" target="_blank" title="(in B4 end-user docs)"><span>Contributor overview</span></a>, where the contributor workflow is
extensively detailed, as well as the tools to ease it, such as
<a class="icon link reference external" href="https://b4.docs.kernel.org/en/latest/contributor/prep.html" target="_blank" title="(in B4 end-user docs)"><span class="xref std std-doc">b4 prep</span></a>,
<a class="icon link reference external" href="https://b4.docs.kernel.org/en/latest/contributor/send.html" target="_blank" title="(in B4 end-user docs)"><span class="xref std std-doc">b4 send</span></a>, and
<a class="icon link reference external" href="https://b4.docs.kernel.org/en/latest/contributor/trailers.html" target="_blank" title="(in B4 end-user docs)"><span class="xref std std-doc">b4 trailers</span></a>.</p>
</section>
<section id="subsytems">
<span id="subsystem"></span><h2>Subsytems<a class="headerlink" href="#subsytems" title="Link to this heading"></a></h2>
<p>The Linux kernel is organized into subsystems—logical divisions around
functionality such as core APIs (memory, scheduling, locking, timers), driver
interfaces (networking, storage, input, etc.), and various device-oriented
modules (IIO, USB, SPI, etc.). Each subsystem encapsulates its own APIs,
conventions, and lifecycle, helping maintain modularity and clarity. For an
up-to-date map of these subsystems and their interfaces, see
<a class="icon link reference external" href="https://docs.kernel.org/subsystem-apis.html" target="_blank" title="(in The Linux Kernel v6.19.0-rc7)"><span>Kernel subsystem documentation</span></a>.</p>
<p>When developing for a particular subsystem, look for the appropriate git tree
in the <a class="icon git reference external" href="https://github.com/analogdevicesinc/linux/tree/main/MAINTAINERS" target="_blank">MAINTAINERS</a> file to work on. Development branches may be
force pushed. It is reasonable to base you work on top of the current latest
tag, such as <a class="icon link reference external" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?h=v6.19-rc1&amp;id=8f0b4cce4481fb22653697cced8d0d04027cb1e8" target="_blank">v6.19-rc1</a>
or near it, this avoids unnecessary merge commits when pulling changes.</p>
<p>For some subsystems, CI/CD is automatically applied to developemnt branches as
described at <a class="reference internal" href="ci.html#ci"><span class="std std-ref">Continuous integration</span></a>.</p>
<section id="iio-subsytem">
<h3>IIO Subsytem<a class="headerlink" href="#iio-subsytem" title="Link to this heading"></a></h3>
<p>The <a class="icon link reference external" href="https://docs.kernel.org/driver-api/iio/intro.html" target="_blank" title="(in The Linux Kernel v6.19.0-rc7)"><span class="xref std std-doc">Industrial I/O subsystem</span></a> is
intended to provide support for devices that in some senses are analog to
digital or digital to analog converters (ADCs, DACs). Devices that fall into
this category are: ADCs, accelerometers, gyros, IMUs, capacitance to digital
converters, pressure sensors, light and proximity sensors, temperature sensors,
magnetometers, DACs, DDS (Direct Digital Synthesis), variable/programmable gain
amplifiers (VGA, PGA). These devices typically would be connected via SPI or
I2C.</p>
<p>The overall aim is to fill the gap between the somewhat similar hwmon and input
subsystems. Hwmon is very much directed at low sample rate sensors used in
applications such as fan speed control and temperature measurement.</p>
<p>To continuous capture data based on a trigger source,
<a class="icon link reference external" href="https://docs.kernel.org/iio/iio_devbuf.html" target="_blank" title="(in The Linux Kernel v6.19.0-rc7)"><span>Industrial IIO device buffers</span></a> are used.</p>
</section>
</section>
</section>


          </div>
              <div class="related">
                &nbsp;
    <a href="iio/apollo.html" title="Previous document (Alt+Shift+LeftArrow)" class="prev">AD9088 driver</a>
    <a href="ci.html" title="Next document (Alt+Shift+RightArrow)" class="next">Continuous integration</a>
              </div>
          
        </div>
      </div>
  </div>

  <label id="cancel-area-show-toc" for="input-show-toc"></label>
  <label id="cancel-area-show-localtoc" for="input-show-localtoc"></label>
    <footer>
      &#169;2025, Analog Devices, Inc.
      
      |
      Made with <a href="https://www.sphinx-doc.org/">Sphinx</a>
      &amp; <a href="https://github.com/analogdevicesinc/doctools">Doctools</a>
      
    </footer>
  </body>
</html>