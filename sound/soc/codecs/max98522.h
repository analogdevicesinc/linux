/* SPDX-License-Identifier: GPL-2.0 */
/*
 * Copyright (c) 2020, Maxim Integrated.
 */

#ifndef _MAX98522_H
#define _MAX98522_H

/* MAX98522 Register Address */
#define MAX98522_SOFTWARE_RESET 0x1000
#define MAX98522_SUPPLY_AND_OTP_INT_RAW 0x2000
#define MAX98522_POWER_UP_AND_DOWN_INT_RAW 0x2001
#define MAX98522_CLK_AND_DATA_INT_RAW 0x2003
#define MAX98522_AMP_OUTPUT_INT_RAW 0x2005
#define MAX98522_AMP_A_THERMAL_WARN_INT_RAW 0x2006
#define MAX98522_AMP_B_THERMAL_WARN_INT_RAW 0x2007
#define MAX98522_BPE_AND_DHT_INT_RAW 0x200A
#define MAX98522_SUPPLY_AND_OTP_INT_STATE 0x2010
#define MAX98522_POWER_UP_AND_DOWN_INT_STATE 0x2011
#define MAX98522_CLK_AND_DATA_INT_STATE 0x2013
#define MAX98522_AMP_OUTPUT_FAULT_INT_STATE 0x2015
#define MAX98522_AMP_A_THERMAL_WARN_INT_STATE 0x2016
#define MAX98522_AMP_B_THERMAL_WARN_INT_STATE 0x2017
#define MAX98522_BPE_AND_DHT_INT_STATE 0x201A
#define MAX98522_SUPPLY_AND_OTP_INT_FLAG 0x2020
#define MAX98522_POWER_UP_AND_DOWN_INT_FLAG 0x2021
#define MAX98522_CLK_AND_DATA_INT_FLAG 0x2023
#define MAX98522_AMP_OUTPUT_FAULT_INT_FLAG 0x2025
#define MAX98522_AMP_A_THERMAL_INT_FLAG 0x2026
#define MAX98522_AMP_B_THERMAL_INT_FLAG 0x2027
#define MAX98522_BPE_AND_DHT_INT_FLAG 0x202A
#define MAX98522_SUPPLY_AND_OTP_INT_EN 0x2030
#define MAX98522_POWER_UP_AND_DOWN_INT_EN 0x2031
#define MAX98522_CLK_AND_DATA_INT_EN 0x2033
#define MAX98522_AMP_OUTPUT_FAULT_INT_EN 0x2035
#define MAX98522_AMP_A_THERMAL_INT_EN 0x2036
#define MAX98522_AMP_B_THERMAL_INT_EN 0x2037
#define MAX98522_BPE_AND_DHT_INT_EN 0x203A
#define MAX98522_SUPPLY_AND_OTP_INT_CLR 0x2040
#define MAX98522_POWER_UP_AND_DOWN_INT_CLR 0x2041
#define MAX98522_CLK_AND_DATA_INT_CLR 0x2043
#define MAX98522_AMP_OUTPUT_FAULT_INT_CLR 0x2045
#define MAX98522_AMP_A_THERMAL_INT_CLR 0x2046
#define MAX98522_AMP_B_THERMAL_INT_CLR 0x2047
#define MAX98522_BPE_AND_DHT_INT_CLR 0x204A
#define MAX98522_DRIVE_STRENGTH_CTRL 0x2050
#define MAX98522_IRQ_CTRL 0x205F
#define MAX98522_CLK_MONITOR_CTRL 0x21F0
#define MAX98522_SPK_MONITOR_THRESH 0x21F1
#define MAX98522_ENABLE_CTRLS 0x21F7
#define MAX98522_PCM_MODE_CFG 0x2201
#define MAX98522_PCM_CLK_SETUP 0x2202
#define MAX98522_PCM_SR_SET_1 0x2203
#define MAX98522_PCM_TX_CTRL_12 0x2209
#define MAX98522_PCM_TX_CTRL_07 0x220A
#define MAX98522_PCM_TX_CTRL_08 0x220B
#define MAX98522_PCM_TX_CTRL_09 0x220C
#define MAX98522_PCM_TX_CTRL_10 0x220D
#define MAX98522_PCM_TX_CTRL_11 0x220E
#define MAX98522_PCM_TX_CTRL_06 0x220F
#define MAX98522_PCM_TX_CTRL_01 0x2210
#define MAX98522_PCM_TX_CTRL_02 0x2211
#define MAX98522_PCM_TX_CTRL_03 0x2212
#define MAX98522_PCM_TX_CTRL_04 0x2213
#define MAX98522_PCM_TX_CTRL_05 0x2214
#define MAX98522_PCM_TX_CTRL_13 0x2215
#define MAX98522_PCM_TX_HIZ_CTRL_01 0x2220
#define MAX98522_PCM_TX_HIZ_CTRL_02 0x2221
#define MAX98522_PCM_TX_HIZ_CTRL_03 0x2222
#define MAX98522_PCM_TX_HIZ_CTRL_04 0x2223
#define MAX98522_PCM_TX_HIZ_CTRL_05 0x2224
#define MAX98522_PCM_TX_HIZ_CTRL_06 0x2225
#define MAX98522_PCM_TX_HIZ_CTRL_07 0x2226
#define MAX98522_PCM_TX_HIZ_CTRL_08 0x2227
#define MAX98522_PCM_INTERFACE_MODE 0x2228
#define MAX98522_PCM_RX_SOURCE_01 0x2229
#define MAX98522_PCM_RX_SOURCE_02 0x222A
#define MAX98522_PCM_TX_SOURCE_ENABLES_1 0x222C
#define MAX98522_PCM_TX_SOURCE_ENABLES_2 0x222D
#define MAX98522_PCM_RX_ENABLES 0x222E
#define MAX98522_PCM_TX_ENABLES 0x222F
#define MAX98522_TONE_GEN_AND_DC_CFG 0x2241
#define MAX98522_TONE_GEN_DC_LEVEL_1 0x2242
#define MAX98522_TONE_GEN_DC_LEVEL_2 0x2243
#define MAX98522_TONE_GEN_DC_LEVEL_3 0x2244
#define MAX98522_TONE_GEN_CLK_CTRL 0x2246
#define MAX98522_TONE_GEN_ENABLE 0x224F
#define MAX98522_NOISE_GATE_MODE_CTRL 0x2250
#define MAX98522_NOISE_GATE_MODE_EN 0x2253
#define MAX98522_AMP_A_VOL_LVL_CTRL 0x22F0
#define MAX98522_AMP_B_VOL_LVL_CTRL 0x22F1
#define MAX98522_AMP_VOL_UPDATE_CTRL 0x22FF
#define MAX98522_AMP_A_VOL_RAMP_CTRL 0x2300
#define MAX98522_AMP_A_PATH_GAIN 0x2302
#define MAX98522_AMP_A_DSP_CFG 0x2303
#define MAX98522_AMP_A_CLIP_GAIN 0x230C
#define MAX98522_AMP_A_CLASS_DG_THRESH 0x230D
#define MAX98522_AMP_A_SPK_MODE 0x230E
#define MAX98522_AMP_A_SWITCH_FREQ 0x230F
#define MAX98522_AMP_A_SPK_EDGE_HV 0x2310
#define MAX98522_AMP_A_SPK_EDGE_LV 0x2311
#define MAX98522_AMP_A_DAC_GAIN_AND_CURRENT_CFG 0x231F
#define MAX98522_AMP_B_VOL_RAMP_CTRL 0x2320
#define MAX98522_AMP_B_PATH_GAIN 0x2322
#define MAX98522_AMP_B_DSP_CFG 0x2323
#define MAX98522_AMP_B_CLIP_GAIN 0x232C
#define MAX98522_AMP_B_CLASS_DG_THRESH 0x232D
#define MAX98522_AMP_B_SPK_MODE 0x232E
#define MAX98522_AMP_B_SWITCH_FREQ 0x232F
#define MAX98522_AMP_B_SPK_EDGE_HV 0x2330
#define MAX98522_AMP_B_SPK_EDGE_LV 0x2331
#define MAX98522_AMP_B_DAC_GAIN_AND_CURRENT_CFG 0x233F
#define MAX98522_SSM_CFG 0x2383
#define MAX98522_SPK_PHASE_CTRL 0x238A
#define MAX98522_AMP_EN 0x23FF
#define MAX98522_IV_SENSE_PATH_DSP_CFG 0x2400
#define MAX98522_IV_SENSE_PATH_ENABLES 0x2404
#define MAX98522_MEAS_ADC_SAMPLE_RATE 0x2700
#define MAX98522_MEAS_ADC_OPTIMAL_MODE 0x2702
#define MAX98522_MEAS_ADC_READBACK_CTRL_1 0x2704
#define MAX98522_MEAS_ADC_READBACK_CTRL_2 0x2705
#define MAX98522_MEAS_ADC_DITHER_CONTROL 0x2706
#define MAX98522_MEAS_ADC_PVDD_CFG 0x2710
#define MAX98522_MEAS_ADC_VBAT_CFG 0x2711
#define MAX98522_MEAS_ADC_AMP_A_THERMAL_CFG 0x2712
#define MAX98522_MEAS_ADC_AMP_B_THERMAL_CFG 0x2713
#define MAX98522_MEAS_ADC_PVDD_READBACK_MSB 0x2720
#define MAX98522_MEAS_ADC_PVDD_READBACK_LSB 0x2721
#define MAX98522_MEAS_ADC_VBAT_READBACK_MSB 0x2722
#define MAX98522_MEAS_ADC_VBAT_READBACK_LSB 0x2723
#define MAX98522_MEAS_ADC_AMP_A_THERMAL_READBACK_MSB 0x2724
#define MAX98522_MEAS_ADC_AMP_A_THERMAL_READBACK_LSB 0x2725
#define MAX98522_MEAS_ADC_AMP_B_THERMAL_READBACK_MSB 0x2726
#define MAX98522_MEAS_ADC_AMP_B_THERMAL_READBACK_LSB 0x2727
#define MAX98522_MEAS_ADC_LOWEST_PVDD_READBACK_MSB 0x2730
#define MAX98522_MEAS_ADC_LOWEST_PVDD_READBACK_LSB 0x2731
#define MAX98522_MEAS_ADC_LOWEST_VBAT_READBACK_MSB 0x2732
#define MAX98522_MEAS_ADC_LOWEST_VBAT_READBACK_LSB 0x2733
#define MAX98522_MEAS_ADC_AMP_A_HIGHEST_THERMAL_READBACK_MSB 0x2734
#define MAX98522_MEAS_ADC_AMP_A_HIGHEST_THERMAL_READBACK_LSB 0x2735
#define MAX98522_MEAS_ADC_AMP_B_HIGHEST_THERMAL_READBACK_MSB 0x2736
#define MAX98522_MEAS_ADC_AMP_B_HIGHEST_THERMAL_READBACK_LSB 0x2737
#define MAX98522_MEAS_ADC_CFG 0x273F
#define MAX98522_WARN_THRESH_1 0x2750
#define MAX98522_WARN_THRESH_2 0x2754
#define MAX98522_THERMAL_SHUTDOWN_THRESH 0x2758
#define MAX98522_THERMAL_HYSTERESIS 0x275C
#define MAX98522_THERMAL_FOLDBACK_SETTINGS 0x275F
#define MAX98522_THERMAL_FOLDBACK_ENABLE 0x276F
#define MAX98522_BPE_STATE 0x2800
#define MAX98522_BPE_L2_THRESH_MSB 0x2803
#define MAX98522_BPE_L2_THRESH_LSB 0x2804
#define MAX98522_BPE_L1_THRESH_MSB 0x2805
#define MAX98522_BPE_L1_THRESH_LSB 0x2806
#define MAX98522_BPE_L0_THRESH_MSB 0x2807
#define MAX98522_BPE_L0_THRESH_LSB 0x2808
#define MAX98522_BPE_L2_DWELL_AND_HOLD_TIME 0x280A
#define MAX98522_BPE_L1_DWELL_AND_HOLD_TIME 0x280B
#define MAX98522_BPE_L0_HOLD_TIME 0x280C
#define MAX98522_BPE_L2_ATTACK_AND_RELEASE_STEP 0x280E
#define MAX98522_BPE_L1_ATTACK_AND_RELEASE_STEP 0x280F
#define MAX98522_BPE_L0_ATTACK_AND_RELEASE_STEP 0x2810
#define MAX98522_BPE_L2_MAX_GAIN_ATTEN 0x2812
#define MAX98522_BPE_L1_MAX_GAIN_ATTEN 0x2813
#define MAX98522_BPE_L0_MAX_GAIN_ATTEN 0x2814
#define MAX98522_BPE_L2_GAIN_ATTACK_AND_RELEASE_RATES 0x2816
#define MAX98522_BPE_L1_GAIN_ATTACK_AND_RELEASE_RATES 0x2817
#define MAX98522_BPE_L0_GAIN_ATTACK_AND_RELEASE_RATES 0x2818
#define MAX98522_BPE_L2_LIMITER_CFG 0x281A
#define MAX98522_BPE_L1_LIMITER_CFG 0x281B
#define MAX98522_BPE_L0_LIMITER_CFG 0x281C
#define MAX98522_BPE_L2_LIMITER_ATTACK_AND_RELEASE_RATES 0x281E
#define MAX98522_BPE_L1_LIMITER_ATTACK_AND_RELEASE_RATES 0x281F
#define MAX98522_BPE_L0_LIMITER_ATTACK_AND_RELEASE_RATES 0x2820
#define MAX98522_BPE_THRESH_HYSTERESIS 0x2821
#define MAX98522_BPE_INFINITE_HOLD_CLR 0x2822
#define MAX98522_BPE_SUPPLY_SOURCE 0x2823
#define MAX98522_BPE_LOWEST_STATE 0x2824
#define MAX98522_BPE_LOWEST_GAIN 0x2825
#define MAX98522_BPE_LOWEST_LIMITER 0x2826
#define MAX98522_BPE_ENABLE 0x283F
#define MAX98522_DHT_CFG_1 0x2840
#define MAX98522_LIMITER_CFG_1 0x2841
#define MAX98522_LIMITER_CFG_2 0x2842
#define MAX98522_DHT_CFG_2 0x2843
#define MAX98522_DHT_CFG_3 0x2844
#define MAX98522_DHT_CFG_4 0x2845
#define MAX98522_DHT_SUPPLY_HYSTERESIS_CFG 0x2846
#define MAX98522_DRC_OFFSET_CFG 0x2847
#define MAX98522_DHT_ENABLE 0x284F
#define MAX98522_ET_LEVEL_STEP_SIZE_MSB 0x2861
#define MAX98522_ET_LEVEL_STEP_SIZE_LSB 0x2862
#define MAX98522_ET_LEVEL_PVDD_STEP_SIZE_MSB 0x2863
#define MAX98522_ET_LEVEL_PVDD_STEP_SIZE_LSB 0x2864
#define MAX98522_MAX_DUTY_CYCLE_MSB 0x2865
#define MAX98522_MAX_DUTY_CYCLE_LSB 0x2866
#define MAX98522_MIN_PVDD_LEVEL_MSB 0x2867
#define MAX98522_MIN_PVDD_LEVEL_LSB 0x2868
#define MAX98522_ET_PVDD_MAX_LEVELS 0x2869
#define MAX98522_ET_PVDD_MIN_LEVEL 0x286A
#define MAX98522_ET_PVDD_HEADROOM 0x286B
#define MAX98522_ET_BYPASS_HEADROOM 0x286C
#define MAX98522_ET_SCALABLE_HEADROOM 0x286D
#define MAX98522_ET_DELAY_TIME 0x286E
#define MAX98522_ET_LEVEL_HOLD_TIME 0x286F
#define MAX98522_ET_CONTROL 0x2870
#define MAX98522_ET_PATH_GAIN_CH_A 0x2871
#define MAX98522_ET_PATH_GAIN_CH_B 0x2872
#define MAX98522_ET_PVDD_RESOLUTION 0x2875
#define MAX98522_ET_ENABLE 0x288F
#define MAX98522_GROUP_WRITE_ADDR_CTRL 0x29F1
#define MAX98522_DEVICE_RAMP_CTRL 0x29FD
#define MAX98522_AUTO_RESTART_BEHAVIOR 0x29FE
#define MAX98522_GLOBAL_ENABLE 0x29FF // RWEX
#define MAX98522_R3FFF_REV_ID 0x3FFF

/* MAX98522 Register Mask */
// MAX98522_PCM_MODE_CFG
#define MAX98522_PCM_MODE_CFG_PCM_FORMAT_MASK (0x7 << 3)
#define MAX98522_PCM_MODE_CFG_PCM_FORMAT_I2S (0x0 << 3)
#define MAX98522_PCM_MODE_CFG_PCM_FORMAT_LJ (0x1 << 3)
#define MAX98522_PCM_MODE_CFG_PCM_FORMAT_TDM_MODE_0 (0x3 << 3)
#define MAX98522_PCM_MODE_CFG_PCM_FORMAT_TDM_MODE_1 (0x4 << 3)
#define MAX98522_PCM_MODE_CFG_PCM_FORMAT_TDM_MODE_2 (0x5 << 3)
#define MAX98522_PCM_MODE_CFG_PCM_CHANSZ_MASK (0x3 << 6)
#define MAX98522_PCM_MODE_CFG_PCM_CHANSZ_16 (0x1 << 6)
#define MAX98522_PCM_MODE_CFG_PCM_CHANSZ_24 (0x2 << 6)
#define MAX98522_PCM_MODE_CFG_PCM_CHANSZ_32 (0x3 << 6)

// MAX98522_PCM_SR_SET_1
#define MAX98522_PCM_SR_SET_1_SR_MASK (0xF << 0)
#define MAX98522_PCM_SR_SET_1_SR_8000 (0x0 << 0)
#define MAX98522_PCM_SR_SET_1_SR_11025 (0x1 << 0)
#define MAX98522_PCM_SR_SET_1_SR_12000 (0x2 << 0)
#define MAX98522_PCM_SR_SET_1_SR_16000 (0x3 << 0)
#define MAX98522_PCM_SR_SET_1_SR_22050 (0x4 << 0)
#define MAX98522_PCM_SR_SET_1_SR_24000 (0x5 << 0)
#define MAX98522_PCM_SR_SET_1_SR_32000 (0x6 << 0)
#define MAX98522_PCM_SR_SET_1_SR_44100 (0x7 << 0)
#define MAX98522_PCM_SR_SET_1_SR_48000 (0x8 << 0)
#define MAX98522_PCM_SR_SET_1_SR_88200 (0x9 << 0)
#define MAX98522_PCM_SR_SET_1_SR_96000 (0xA << 0)

// MAX98522_GLOBAL_ENABLE
#define MAX98522_GLOBAL_EN_MASK (0x1 << 0)

// MAX98522_PCM_CLK_SETUP
#define MAX98522_PCM_CLK_SETUP_PCM_BCLKEDGE (0x1 << 4)
#define MAX98522_PCM_CLK_SETUP_BSEL_MASK (0xF << 0)

struct max98522_priv {
	struct regmap *regmap;
	unsigned int sysclk;
	unsigned int provider;
	unsigned int tdm_mode;
	unsigned int v_l_slot;
	unsigned int i_l_slot;
};
#endif

